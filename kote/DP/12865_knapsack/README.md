# 평범한 배낭   
   
[https://www.acmicpc.net/problem/12865](https://www.acmicpc.net/problem/12865)

---   
   
<br/>

다음과 같은 아이템이 있다고 하자.   

|아이템|무게|가치|
|-----|:---:|:---:|
|사과|6|13|
|모자|4|8|
|시계|3|6|
|핸드폰|5|12|   
   
현재 내 배낭의 최대 수용 무게가 **7**일 때 최대로 담아갈 수 있는 조합의 가치를 찾자.

동적계획법으로 문제를 풀기 위해선 **이전 단계의 문제가 해결되었다는 믿음을 가지고 현재 문제를 풀어야 한다.**   
   
먼저 그리드를 생성하자.   
   

|아이템/무게|1|2|3|4|5|6|7|
|-----|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|사과|0|0|0|0|0|0|0|
|모자|0|0|0|0|0|0|0|
|시계|0|0|0|0|0|0|0|
|핸드폰|0|0|0|0|0|0|0|   
   
사과를 시작으로 핸드폰까지 각각 **행을 채워나가면서 현재 보고있는 아이템에서의 best 조합을 찾아나간다.**   
   
1. 현재 보고있는 **열**에서 이전 아이템의 최선값이 존재하면 해당 값으로 업데이트.   
2. 만약 `현재 무게 >= 내 아이템의 무게` 라면 **이전 아이템 에서의 최선의 값과 비교**. 이때 포인트는 *현재 내 아이템의 무게를 제하고도 여유 무게가 남는다*면 이전 행에서 `현재 무게 - 내 아이템의 무게`의 정수값을 열로 가지는 위치의 최선값과, 내 아이템의 가치의 합 그리고 이전 행에서의 최선값을 비교한다. 내가 써놓고도 뭔말인지 모르겠으니 예시를 보자.   
   
<br/>

<br/>

|아이템/무게|1|2|3|4|5|6|7|
|-----|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|사과|0|0|0|0|0|13|13|
|모자|0|0|0|0|0|0|0|
|시계|0|0|0|0|0|0|0|
|핸드폰|0|0|0|0|0|0|0|  
   
사과는 무게가 `6` 이므로 배낭에서 무게가 6,7 인 부분이 사과의 가치로 채워진다.

<br/>

|아이템/무게|1|2|3|4|5|6|7|
|-----|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|사과|0|0|0|0|0|13|13|
|모자|0|0|0|8|8|13|13|
|시계|0|0|0|0|0|0|0|
|핸드폰|0|0|0|0|0|0|0|  
   
모자는 무게가 `4` 이므로 무게 4부터 모자의 가치로 채워지다가, 무게 6 부터 이전값인 `13`보다 모자의 가치가 작으므로, 이전값으로 업데이트 한다.   
   
<br/>

|아이템/무게|1|2|3|4|5|6|7|
|-----|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|사과|0|0|0|0|0|13|13|
|모자|0|0|0|8|8|13|13|
|시계|0|0|6|8|8|13|**?**|
|핸드폰|0|0|0|0|0|0|0|  
   
이제 여기가 중요하다. `?` 에는 어떤값이 들어갈까?   
   
현재 무게가 7이고 시계의 무게는 3이다. 고로   
```
이전의 최선값(13) < 시계의가치(6) + 무게가 4인 어떤 아이템의 가치
```
위를 만족한다면 13이 아닌 값으로 업데이트 된다.   
   
**무게가 4인 어떤 아이템의 가치를 선택할 때 해당 값의 최선값은 바로 위의 열에 존재한다**   
즉, 모자 행 에서의 무게가 4일때의 최선 값인 `8`에 시계의 가치인 `6` 을 더한 `14` 값이 `13` 보다 크므로 14로 업데이트 된다.
   
<br/>

|아이템/무게|1|2|3|4|5|6|7|
|-----|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|사과|0|0|0|0|0|13|13|
|모자|0|0|0|8|8|13|13|
|시계|0|0|6|8|8|13|**14**|
|핸드폰|0|0|0|0|0|0|0|  
   
```
무게가 4인 어떤 아이템의 가치를 선택할 때 해당 값의 최선값은 바로 위의 열에 존재한다
```   
해당 내용이 성립하는 이유는 동적계획법의 `큰 문제를 하위 문제들로 나누어 푼다` 라는 특성 때문에, 현재 가방의 여유무게 만큼에서 낼 수 있는 최선의 가치는 바로 이전 문제 (이전 하위문제)에 있기 때문이다.